<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="../assets/icon/favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi - CS</title>

    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="dashboards.css">
    <script src="../js/funcoes.js"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <!-- scripts do Chart.js -->
    <script type="text/javascript" src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>

</head>

<body onload="validarSessao(), requisitar_pontuacao()">
    <!-- <body onload="validarSessao()"> -->

    <div class="janela">
        <div style="width:300px;" class="header-left">
            <h1>Pi - CS</h1>

            <div class="hello">
                <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
            </div>

            <div class="btn-nav-white">
                <a href="./cards.html">
                    <h3>Dashboard</h3>
                </a>
            </div>

            <div class="btn-nav">

                <h3>Teste de mira</h3>

            </div>



            <div class="btn-logout" onclick="limparSessao()">
                <h3>Sair</h3>
            </div>
            
        </div>
        
        <div class="dash" style="display: flex; align-items: center; justify-content: center; flex-direction: column;">
            <div style="display:none ; margin: auto; color: black; background-color: grey; width: 180px; height: 100px; top: 0;left: 0; right: 0; bottom: 0; font-size: 15px; align-items: center; align-self: center; justify-content: center;" id="resultado">Pontuação: <span id="span_resultado">0</span></div>
             

            <button style="display: block; border-radius: 10px; border: 1px solid green; background-color: greenyellow; width: 180px; height: 90px;" id="button_comecar" onclick="comecar()"> Iniciar
            </button>
             

                <div style="display: none;" id="jogo" style="width: 550px; heigth: 600px">
                    <div onclick="clicar()" style="border-radius:50%; background-color: red; width: 50px; height: 50px; display: block;position: absolute;" id="alvo"></div>
                </div> 
                
                
            </div>

            <div class="top10" style="display:none ; margin: auto; color: black; background-color: grey; width: 270px; height: 100vh; top: 0;left: 0; right: 0; bottom: 0; font-size: 15px;" id="div_top10">
                
                    
                
            </div>





</body>

</html>

<script>

var qtd = 0

function comecar() {
    span_resultado.innerHTML = ''
    document.getElementById('resultado').style.display = 'none'
document.getElementById('jogo').style.display = 'block'
document.getElementById('div_top10').style.display = 'none'
document.getElementById('button_comecar').style.display = 'none'
setTimeout(parar, 6000)
qtd = 0
}

function parar() {
    document.getElementById('jogo').style.display = 'none'
document.getElementById('button_comecar').style.display = 'block'
document.getElementById('resultado').style.display = 'flex'
document.getElementById('div_top10').style.display = 'block'
span_resultado.innerHTML = `${qtd}`
button_comecar.innerHTML = 'Jogar novamente'

}

function clicar() {
document.getElementById('alvo').style.display = 'none'

qtd += 100

aparecer()


}

function aparecer() {
if (document.getElementById('alvo').style.display = 'none') {
document.getElementById('alvo').style.display = 'block'
document.getElementById('alvo').style.top = (Math.floor(Math.random(1)*(70))) + 'vh'
document.getElementById('alvo').style.left = (Math.floor(Math.random(1)*(70))) + 'vw'



}

}

var top1 = 0
var top2 = 0
var top3 = 0
var top4 = 0
var top5 = 0
var top6 = 0
var top7 = 0
var top8 = 0
var top9 = 0
var top10 = 0

var nome1 = 0
var nome2 = 0
var nome3 = 0
var nome4 = 0
var nome5 = 0
var nome6 = 0
var nome7 = 0
var nome8 = 0
var nome9 = 0
var nome10 = 0



function requisitar_pontuacao() {
        fetch("/usuarios/requisitar_pontuacao").then(function (res1) {
            if (res1.ok) {
                console.log(res1)
                res1.json().then(function (res1) {
                    console.log("Dados recebidos: ", JSON.stringify(res1))
                
                      top1 = res1[0].pontuacao
                      nome1 = res1[0].nome
                      top2 = res1[1].pontuacao
                      nome2 = res1[1].nome
                      top3 = res1[2].pontuacao
                      nome3 = res1[2].nome
                      top4 = res1[3].pontuacao
                      nome4 = res1[3].nome
                      top5 = res1[4].pontuacao
                      nome5 = res1[4].nome
                      top6 = res1[5].pontuacao
                      nome6 = res1[5].nome
                      top7 = res1[6].pontuacao
                      nome7 = res1[6].nome
                      top8 = res1[7].pontuacao
                      nome8 = res1[7].nome
                      top9 = res1[8].pontuacao
                      nome9 = res1[8].nome
                      top10 = res1[9].pontuacao
                      nome10 = res1[9].nome

                      div_top10.innerHTML += `${nome1} -- ${top1} <br>`
                      div_top10.innerHTML += `${nome2} -- ${top2} <br>`
            div_top10.innerHTML += `${nome3} -- ${top3} <br>`
            div_top10.innerHTML += `${nome4} -- ${top4} <br>`
            div_top10.innerHTML += `${nome5} -- ${top5} <br>`
            div_top10.innerHTML += `${nome6} -- ${top6} <br>`
            div_top10.innerHTML += `${nome7} -- ${top7} <br>`
            div_top10.innerHTML += `${nome8} -- ${top8} <br>`
            div_top10.innerHTML += `${nome9} -- ${top9} <br>`
            div_top10.innerHTML += `${nome10} -- ${top10} <br>`

                }
                );
            } else {
                throw ('Houve um erro ao pegar info!');
            }
        }).catch(function (res1) {
            console.error(res1);
        });
    }


</script>